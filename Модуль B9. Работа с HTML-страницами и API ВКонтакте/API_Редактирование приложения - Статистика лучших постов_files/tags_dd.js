!function(t){function s(s){for(var i,r,o=s[0],h=s[1],d=s[2],p=0,l=[];p<o.length;p++)r=o[p],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);for(u&&u(s);l.length;)l.shift()();return n.push.apply(n,d||[]),e()}function e(){for(var t,s=0;s<n.length;s++){for(var e=n[s],i=!0,o=1;o<e.length;o++){var h=e[o];0!==a[h]&&(i=!1)}i&&(n.splice(s--,1),t=r(r.s=e[0]))}return t}var i={},a={"web/tags_dd":0},n=[];function r(s){if(i[s])return i[s].exports;var e=i[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=i,r.d=function(t,s,e){r.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,s){if(1&s&&(t=r(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var i in t)r.d(e,i,function(s){return t[s]}.bind(null,i));return e},r.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(s,"a",s),s},r.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},r.p="/js/cmodules/";var o=window.webpackJsonp=window.webpackJsonp||[],h=o.push.bind(o);o.push=s,o=o.slice();for(var d=0;d<o.length;d++)s(o[d]);var u=h;n.push([286,"vendors","common"]),e()}({286:function(t,s,e){t.exports=e("dnkZ")},dnkZ:function(t,s,e){"use strict";e.r(s);e("pIFo"),e("KKXr"),e("OG14");var i=e("zxIV"),a=function(t,s){var e=ge(t);s=extend({width:300,paddings:0,placeholder:"no placeholder",steps:[],trim_input_value:!0},s),this.opts=s,this.step=0,this.steps=this.opts.steps||[],this.control=ce("div",{className:"tdd_wrap"+(s.search?" tdd_search":""),innerHTML:['<div class="tdd_control clear_fix"><div class="tdd_taglist"></div><div class="tdd_input_cont fl_l"><input class="tdd_input" placeholder="',(this.opts.steps[this.step]||this.opts).placeholder,'" /></div></div><div class="tdd_suggest" style="width: ',s.width-2,'px"><div class="tdd_suggest_items"></div><div class="tdd_bottom1" style="width: ',s.width-2,'px"></div><div class="tdd_bottom2" style="width: ',s.width-2,'px"></div></div>'].join("")},{width:s.width+"px"}),e.parentNode.insertBefore(this.control,e),this.input=geByClass("tdd_input",this.control)[0],this.input.style.width=s.width-26+"px",this.tagCont=geByClass("tdd_taglist",this.control)[0],this.suggest=geByClass("tdd_suggest",this.control)[0],this.suggestItems=geByClass("tdd_suggest_items",this.suggest)[0],this.tags={};var a=this;stManager.add(["notifier.js"],(function(){a.scroll=new Scrollbar(a.suggestItems,{prefix:"tdd_",more:debugLog,nomargin:!0,nokeys:!0,right:0,left:s.width-9})})),this.obj=e;var n="keydown blur focus paste cut";if(addEvent(this.input,n,function(t){return!1!==this.inputEvent(t)||cancelEvent(t)}.bind(this)),placeholderSetup(this.input,{back:!0,fast:!0}),e.value){var r=e.value.split(",");for(var o in r)r.hasOwnProperty(o)&&this.addTag(r[o],!0)}Object(i.data)(this.control,"tags_dd",this),cur.destroy.push(()=>{Object(i.removeData)(this.control,"tags_dd"),removeEvent(this.input,n)}),this.setData(s)};extend(a.prototype,{inputEvent:function(t){switch(t.type){case"paste":case"cut":return this.inputChange(!0),!0;case"focus":return this.showDD(!1,!0),!0;case"blur":return this.addTag(),this.hideDD(),!1}switch(t.keyCode){case KEY.ESC:this.hideDD();break;case KEY.RIGHT:val(this.input).length==this.selectionEnd()&&this.addTag();break;case KEY.RETURN:var s=this.steps[this.step]||this.opts,e=this.str||"";s.data&&s.data[e]&&s.data[e].length&&isVisible(this.suggest)&&this.setItem(),this.addTag();break;case KEY.UP:return this.itemMove(!0),!1;case KEY.DOWN:this.itemMove();break;case 16:case 17:break;case KEY.LEFT:if(val(this.input))break;case KEY.DEL:if(0==this.selectionEnd()){var i=this.tagCont.lastChild;if(!i){this.hideDD();break}var n=trim(a.tagVal(i));return this.setValue(""),this.removeTag(i),this.setData({input:n}),this.updateSource(),this.inputChange(),!1}default:this.focus="keys",setTimeout(function(){this.str=val(this.input),","==this.str.substr(this.str.length-1,1)&&(val(this.input,this.str.substr(0,this.str.length-1)),this.addTag()),this.updateSource(!0)}.bind(this),0),this.inputChange()}},inputChange:function(t,s){clearTimeout(this.inputTimeout),this.inputTimeout=setTimeout(function(){this.str?this.showDD(!1,s):this.hideDD()}.bind(this),t?0:100)},updateSource:function(t,s){var e=[];for(var i in this.tags)i&&this.tags.hasOwnProperty(i)&&e.push(this.opts.trim_input_value?i:this.tags[i]);this.str&&e.push(this.str),val(this.obj,e.join(",")),this.opts.onChange&&this.opts.onChange(s,this.obj)},loadDD:function(t){var s=this.steps[this.step]||this.opts,e=s.url||this.opts.url;if(e){var i=s.params||this.opts.params;ajax.post(e,extend(i,{q:this.str,tags:this.obj.value}),{onDone:function(e){s.data=extend(s.data||{},e),t()}})}},showDD:function(t,s){var e=this.steps[this.step]||this.opts;if(e){var i=this.str||"";if(!i&&s)hide(this.suggest);else if(e.data&&e.data[i]){var a=e.data[i].slice(0,40),n=this.getListHTML(a);if(!n)return hide(this.suggest),!1;this.suggestItems.innerHTML=n,this.shown=a.length,show(this.suggest),this.scroll.update(!1,!0),this.itemMove(!1,!0)}else t||this.loadDD(function(){this.showDD(!0)}.bind(this))}},hideDD:function(){setTimeout(function(){hide(this.suggest),this.justSelected&&(this.justSelected=!1,this.focusInput())}.bind(this),0)},getListHTML:function(t){var s=[];for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];this.tags[i[1]]||s.push('<a val="',i[0],'" class="tdd_item" onmouseover="TagsDD.activeItem(this);" onmousedown="return TagsDD.selectItem(this, event);">',i[1],"</a>")}return s.join("")},setValue:function(t){this.input.setValue?this.input.setValue(t):val(this.input,t),this.str=t},setData:function(t){if(t.input&&this.setValue(t.input),t.steps&&(this.steps=t.steps),t.tags)for(var s in this.tags={},this.step=0,this.tagCont.innerHTML="",t.tags)t.tags.hasOwnProperty(s)&&this.addTag(s);t.params&&(this.opts.params=t.params),this.updateInput()},addTag:function(t,s){var e=t||trim(val(this.input));if(e=e.replace(/<|>/g,"")){var i=e,a=parseInt((this.opts.width-15)/7.5);if(e.length>a&&(e=trim(e.substr(0,a))+"..."),this.opts.capitalCase&&(e=e.substr(0,1).toUpperCase()+e.substr(1)),this.tags[e])return!1;this.tags[e]=i;var n=ce("div",{className:"tdd_tag fl_l",innerHTML:'<span class="tdd_l">'+e+'</span><a class="tdd_x" onclick="TagsDD.removeTag(this.parentNode);" onmouseover="TagsDD.overTag(this);" onmouseout="TagsDD.outTag(this);"><div class="tdd_x_c"></div></a>'});this.setValue(""),this.tagCont.appendChild(n),this.step+=1,this.updateInput(),s||this.updateSource(!1,!0),this.steps[this.step]&&(this.steps[this.step].data={}),this.hideDD()}},selectionEnd:function(t){if(this.input.createTextRange){var s=document.selection.createRange().duplicate();return s.moveStart("character",-this.input.value.length),s.text.length}return this.input.selectionEnd},updateInput:function(){var t=geByClass("input_back_content",this.input.previousSibling)[0];if(t){t.innerHTML=(this.steps[this.step]||this.opts).placeholder;var s=!1;isVisible(t.parentNode.parentNode)||(s=!0,show(t.parentNode.parentNode));var e=getSize(t)[0]+2;s&&hide(t.parentNode.parentNode),this.input.style.width=e+"px";var i=getXY(this.input),a=getXY(this.control)[0]+this.opts.width-this.opts.paddings-(i[0]+e);a>0&&(this.input.style.width=e+a-11+"px")}},removeTag:function(t){for(re(t);t.firstChild&&3!=t.firstChild.nodeType;)t=t.firstChild;var s=t.innerHTML;delete this.tags[s],this.input.focus(),this.step-=1,this.updateInput(),this.updateSource(!1,!0),this.steps[this.step]&&(this.steps[this.step].data={})},itemMove:function(t,s){this.focus="items";var e=geByClass("tdd_active",this.suggest)[0];if(e){var i=t?e.previousSibling:e.nextSibling;i&&(a.activeItem(i,e),this.focusItem(i,t))}else s||addClass(this.suggestItems.firstChild,"tdd_active")},focusItem:function(t,s){var e=getXY(t)[1]-getXY(this.suggestItems)[1],i=getSize(t)[1],a=this.scroll.val(),n=this.scroll.scrollHeight,r=e-Math.floor((n-i)/2);(s&&r<a||!s&&r>a)&&this.scroll.val(e-Math.floor((n-i)/2))},setItem:function(t){if(t=t||geByClass("tdd_active",this.suggestItems)[0]){for(;t.firstChild&&3!=t.firstChild.nodeType;)t=t.firstChild;this.setValue(t.innerHTML),this.hideDD()}},focusInput:function(){this.input.focus(),this.inputChange(!0,!0)}}),extend(a,{activeItem:function(t,s){if(s=s||geByClass("tdd_active",t.parentNode)[0]){if(s==t)return;removeClass(s,"tdd_active")}addClass(t,"tdd_active")},selectItem:function(t,s){if(2==(s=s||button).button)return cancelEvent(s);var e=Object(i.data)(t.parentNode.parentNode.parentNode,"tags_dd");e.setItem(t),e.addTag(),e.justSelected=!0,setTimeout((function(){e.justSelected=!1}),1e3)},removeTag:function(t){Object(i.data)(t.parentNode.parentNode.parentNode,"tags_dd").removeTag(t)},tagVal:function(t){return geByClass("tdd_l",t)[0].innerHTML},overTag:function(t){animate(t,{opacity:1},100)},outTag:function(t){animate(t,{opacity:.6},100)}}),window.TagsDD=a;try{stManager.done(jsc("web/tags_dd.js"))}catch(t){}}});